!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.hmmLogo=t()}}(function(){var t;return function e(t,n,i){function o(s,a){if(!n[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var h=n[s]={exports:{}};t[s][0].call(h.exports,function(e){var n=t[s][1][e];return o(n?n:e)},h,h.exports,e,t,n,i)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(t,e){var n=t("underscore"),i=t("backbone-events-standalone"),o=t("backbone-extend-standalone"),r=t("jbone"),s=function(t){this.cid=n.uniqueId("view"),t||(t={}),n.extend(this,n.pick(t,l)),this._ensureElement(),this.initialize.apply(this,arguments)},a=/^(\S+)\s*(.*)$/,l=["model","collection","el","id","attributes","className","tagName","events"];n.extend(s.prototype,i,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof r?t:r(t),this.el=this.$el[0]},delegateEvents:function(t){if(!t&&!(t=n.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var i=t[e];if(n.isFunction(i)||(i=this[t[e]]),i){var o=e.match(a);this.delegate(o[1],o[2],n.bind(i,this))}}return this},delegate:function(t,e,n){this.$el.on(t+".delegateEvents"+this.cid,e,n)},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,n){this.$el.off(t+".delegateEvents"+this.cid,e,n)},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var t=n.extend({},n.result(this,"attributes"));this.id&&(t.id=n.result(this,"id")),this.className&&(t["class"]=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}}),s.extend=o,e.exports=s},{"backbone-events-standalone":3,"backbone-extend-standalone":4,jbone:5,underscore:6}],2:[function(e,n,i){!function(){function e(){return{keys:Object.keys||function(t){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError("keys() called on a non-object");var e,n=[];for(e in t)t.hasOwnProperty(e)&&(n[n.length]=e);return n},uniqueId:function(t){var e=++h+"";return t?t+e:e},has:function(t,e){return l.call(t,e)},each:function(t,e,n){if(null!=t)if(a&&t.forEach===a)t.forEach(e,n);else if(t.length===+t.length){for(var i=0,o=t.length;o>i;i++)if(e.call(n,t[i],i,t)===s)return}else for(var r in t)if(this.has(t,r)&&e.call(n,t[r],r,t)===s)return},once:function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}}}}var o,r=this,s={},a=Array.prototype.forEach,l=Object.prototype.hasOwnProperty,c=Array.prototype.slice,h=0,u=e();o={on:function(t,e,n){if(!_(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var i=this._events[t]||(this._events[t]=[]);return i.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,n){if(!_(this,"once",t,[e,n])||!e)return this;var i=this,o=u.once(function(){i.off(t,o),e.apply(this,arguments)});return o._callback=e,this.on(t,o,n)},off:function(t,e,n){var i,o,r,s,a,l,c,h;if(!this._events||!_(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(s=t?[t]:u.keys(this._events),a=0,l=s.length;l>a;a++)if(t=s[a],r=this._events[t]){if(this._events[t]=i=[],e||n)for(c=0,h=r.length;h>c;c++)o=r[c],(e&&e!==o.callback&&e!==o.callback._callback||n&&n!==o.context)&&i.push(o);i.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=c.call(arguments,1);if(!_(this,"trigger",t,e))return this;var n=this._events[t],i=this._events.all;return n&&d(n,e),i&&d(i,arguments),this},stopListening:function(t,e,n){var i=this._listeners;if(!i)return this;var o=!e&&!n;"object"==typeof e&&(n=this),t&&((i={})[t._listenerId]=t);for(var r in i)i[r].off(e,n,this),o&&delete this._listeners[r];return this}};var f=/\s+/,_=function(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var o in n)t[e].apply(t,[o,n[o]].concat(i));return!1}if(f.test(n)){for(var r=n.split(f),s=0,a=r.length;a>s;s++)t[e].apply(t,[r[s]].concat(i));return!1}return!0},d=function(t,e){var n,i=-1,o=t.length,r=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++i<o;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<o;)(n=t[i]).callback.call(n.ctx,r);return;case 2:for(;++i<o;)(n=t[i]).callback.call(n.ctx,r,s);return;case 3:for(;++i<o;)(n=t[i]).callback.call(n.ctx,r,s,a);return;default:for(;++i<o;)(n=t[i]).callback.apply(n.ctx,e)}},p={listenTo:"on",listenToOnce:"once"};u.each(p,function(t,e){o[e]=function(e,n,i){var o=this._listeners||(this._listeners={}),r=e._listenerId||(e._listenerId=u.uniqueId("l"));return o[r]=e,"object"==typeof n&&(i=this),e[t](n,i,this),this}}),o.bind=o.on,o.unbind=o.off,o.mixin=function(t){var e=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return u.each(e,function(e){t[e]=this[e]},this),t},"function"==typeof t?t(function(){return o}):"undefined"!=typeof i?("undefined"!=typeof n&&n.exports&&(i=n.exports=o),i.BackboneEvents=o):r.BackboneEvents=o}(this)},{}],3:[function(t,e){e.exports=t("./backbone-events-standalone")},{"./backbone-events-standalone":2}],4:[function(e,n,i){!function(e){"object"==typeof i?n.exports=e():"function"==typeof t&&t.amd?t(e):window.BackboneExtend=e()}(function(){"use strict";var t={has:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},extend:function(t){for(var e=1;e<arguments.length;++e){var n=arguments[e];if(n)for(var i in n)t[i]=n[i]}return t}},e=function(e,n){var i,o=this;i=e&&t.has(e,"constructor")?e.constructor:function(){return o.apply(this,arguments)},t.extend(i,o,n);var r=function(){this.constructor=i};return r.prototype=o.prototype,i.prototype=new r,e&&t.extend(i.prototype,e),i.__super__=o.prototype,i};return e})},{}],5:[function(e,n){!function(e){function i(t){var n=t.length,i=typeof t;return m(i)||t===e?!1:1===t.nodeType&&n?!0:g(i)||0===n||"number"==typeof n&&n>0&&n-1 in t}function o(t,e){var n,i;this.originalEvent=t,i=function(t,e){this[t]="preventDefault"===t?function(){return this.defaultPrevented=!0,e[t]()}:m(e[t])?function(){return e[t]()}:e[t]};for(n in t)(t[n]||"function"==typeof t[n])&&i.call(this,n,t);v.extend(this,e)}var r,s=e.$,a=e.jBone,l=/^<(\w+)\s*\/?>$/,c=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,h=[].slice,u=[].splice,f=Object.keys,_=document,d=function(t){return"string"==typeof t},p=function(t){return t instanceof Object},m=function(t){var e={};return t&&"[object Function]"===e.toString.call(t)},g=function(t){return Array.isArray(t)},v=function(t,e){return new r.init(t,e)};v.noConflict=function(){return e.$=s,e.jBone=a,v},r=v.fn=v.prototype={init:function(t,e){var n,i,o,r;if(!t)return this;if(d(t)){if(i=l.exec(t))return this[0]=_.createElement(i[1]),this.length=1,p(e)&&this.attr(e),this;if((i=c.exec(t))&&i[1]){for(r=_.createDocumentFragment(),o=_.createElement("div"),o.innerHTML=t;o.lastChild;)r.appendChild(o.firstChild);return n=h.call(r.childNodes),v.merge(this,n)}if(v.isElement(e))return v(e).find(t);try{return n=_.querySelectorAll(t),v.merge(this,n)}catch(s){return this}}return t.nodeType?(this[0]=t,this.length=1,this):m(t)?t():t instanceof v?t:v.makeArray(t,this)},pop:[].pop,push:[].push,reverse:[].reverse,shift:[].shift,sort:[].sort,splice:[].splice,slice:[].slice,indexOf:[].indexOf,forEach:[].forEach,unshift:[].unshift,concat:[].concat,join:[].join,every:[].every,some:[].some,filter:[].filter,map:[].map,reduce:[].reduce,reduceRight:[].reduceRight,length:0},r.constructor=v,r.init.prototype=r,v.setId=function(t){var n=t.jid;t===e?n="window":void 0===t.jid&&(t.jid=n=++v._cache.jid),v._cache.events[n]||(v._cache.events[n]={})},v.getData=function(t){t=t instanceof v?t[0]:t;var n=t===e?"window":t.jid;return{jid:n,events:v._cache.events[n]}},v.isElement=function(t){return t&&t instanceof v||t instanceof HTMLElement||d(t)},v._cache={events:{},jid:0},v.merge=function(t,e){for(var n=e.length,i=t.length,o=0;n>o;)t[i++]=e[o++];return t.length=i,t},v.contains=function(t,e){var n;return t.reverse().some(function(t){return t.contains(e)?n=t:void 0}),n},v.extend=function(t){var e,n,i,o;return u.call(arguments,1).forEach(function(r){if(r)for(e=f(r),n=e.length,i=0,o=t;n>i;i++)o[e[i]]=r[e[i]]}),t},v.makeArray=function(t,e){var n=e||[];return null!==t&&(i(t)?v.merge(n,d(t)?[t]:t):n.push(t)),n},v.Event=function(t,e){var n,i;return t.type&&!e&&(e=t,t=t.type),n=t.split(".").splice(1).join("."),i=t.split(".")[0],t=_.createEvent("Event"),t.initEvent(i,!0,!0),v.extend(t,{namespace:n,isDefaultPrevented:function(){return t.defaultPrevented}},e)},r.on=function(t){var e,n,i,r,s,a,l,c,h=arguments,u=this.length,f=0;for(2===h.length?e=h[1]:(n=h[1],e=h[2]),c=function(c){v.setId(c),s=v.getData(c).events,t.split(" ").forEach(function(t){a=t.split(".")[0],i=t.split(".").splice(1).join("."),s[a]=s[a]||[],r=function(t){t.namespace&&t.namespace!==i||(l=null,n?(~v(c).find(n).indexOf(t.target)||(l=v.contains(v(c).find(n),t.target)))&&(l=l||t.target,t=new o(t,{currentTarget:l}),e.call(l,t)):e.call(c,t))},s[a].push({namespace:i,fn:r,originfn:e}),c.addEventListener&&c.addEventListener(a,r,!1)})};u>f;f++)c(this[f]);return this},r.one=function(t){var e,n,i,o=arguments,r=0,s=this.length;for(2===o.length?e=o[1]:(n=o[1],e=o[2]),i=function(i){t.split(" ").forEach(function(t){var o=function(n){v(i).off(t,o),e.call(i,n)};n?v(i).on(t,n,o):v(i).on(t,o)})};s>r;r++)i(this[r]);return this},r.trigger=function(t){var e,n=[],i=0,o=this.length;if(!t)return this;for(d(t)?n=t.split(" ").map(function(t){return v.Event(t)}):(t=t instanceof Event?t:v.Event(t),n=[t]),e=function(t){n.forEach(function(e){e.type&&t.dispatchEvent&&t.dispatchEvent(e)})};o>i;i++)e(this[i]);return this},r.off=function(t,e){var n,i,o,r,s=0,a=this.length,l=function(t,n,i,o,r){var s;(e&&r.originfn===e||!e)&&(s=r.fn),t[n][i].fn===s&&(o.removeEventListener(n,s),v._cache.events[v.getData(o).jid][n].splice(i,1))};for(o=function(e){var o,s,a;return(n=v.getData(e).events)?!t&&n?f(n).forEach(function(t){for(s=n[t],o=s.length;o--;)l(n,t,o,e,s[o])}):void t.split(" ").forEach(function(t){if(r=t.split(".")[0],i=t.split(".").splice(1).join("."),n[r])for(s=n[r],o=s.length;o--;)a=s[o],(!i||i&&a.namespace===i)&&l(n,r,o,e,a);else i&&f(n).forEach(function(t){for(s=n[t],o=s.length;o--;)a=s[o],a.namespace.split(".")[0]===i.split(".")[0]&&l(n,t,o,e,a)})}):void 0};a>s;s++)o(this[s]);return this},r.find=function(t){for(var e=[],n=0,i=this.length,o=function(n){m(n.querySelectorAll)&&[].forEach.call(n.querySelectorAll(t),function(t){e.push(t)})};i>n;n++)o(this[n]);return v(e)},r.get=function(t){return this[t]},r.eq=function(t){return v(this[t])},r.parent=function(){for(var t,e=[],n=0,i=this.length;i>n;n++)!~e.indexOf(t=this[n].parentElement)&&t&&e.push(t);return v(e)},r.toArray=function(){return h.call(this)},r.is=function(){var t=arguments;return this.some(function(e){return e.tagName.toLowerCase()===t[0]})},r.has=function(){var t=arguments;return this.some(function(e){return e.querySelectorAll(t[0]).length})},r.attr=function(t,e){var n,i=arguments,o=0,r=this.length;if(d(t)&&1===i.length)return this[0]&&this[0].getAttribute(t);for(2===i.length?n=function(n){n.setAttribute(t,e)}:p(t)&&(n=function(e){f(t).forEach(function(n){e.setAttribute(n,t[n])})});r>o;o++)n(this[o]);return this},r.removeAttr=function(t){for(var e=0,n=this.length;n>e;e++)this[e].removeAttribute(t);return this},r.val=function(t){var e=0,n=this.length;if(0===arguments.length)return this[0]&&this[0].value;for(;n>e;e++)this[e].value=t;return this},r.css=function(t,n){var i,o=arguments,r=0,s=this.length;if(d(t)&&1===o.length)return this[0]&&e.getComputedStyle(this[0])[t];for(2===o.length?i=function(e){e.style[t]=n}:p(t)&&(i=function(e){f(t).forEach(function(n){e.style[n]=t[n]})});s>r;r++)i(this[r]);return this},r.data=function(t,e){var n,i=arguments,o={},r=0,s=this.length,a=function(t,e,n){p(n)?(t.jdata=t.jdata||{},t.jdata[e]=n):t.dataset[e]=n},l=function(t){return"true"===t?!0:"false"===t?!1:t};if(0===i.length)return this[0].jdata&&(o=this[0].jdata),f(this[0].dataset).forEach(function(t){o[t]=l(this[0].dataset[t])},this),o;if(1===i.length&&d(t))return this[0]&&l(this[0].dataset[t]||this[0].jdata&&this[0].jdata[t]);for(1===i.length&&p(t)?n=function(e){f(t).forEach(function(n){a(e,n,t[n])})}:2===i.length&&(n=function(n){a(n,t,e)});s>r;r++)n(this[r]);return this},r.removeData=function(t){for(var e,n,i=0,o=this.length;o>i;i++)if(e=this[i].jdata,n=this[i].dataset,t)e&&e[t]&&delete e[t],delete n[t];else{for(t in e)delete e[t];for(t in n)delete n[t]}return this},r.html=function(t){var e,n=arguments;return 1===n.length&&void 0!==t?this.empty().append(t):0===n.length&&(e=this[0])?e.innerHTML:this},r.append=function(t){var e,n=0,i=this.length;for(d(t)&&c.exec(t)?t=v(t):p(t)||(t=document.createTextNode(t)),t=t instanceof v?t:v(t),e=function(e,n){t.forEach(function(t){e.appendChild(n?t.cloneNode():t)})};i>n;n++)e(this[n],n);return this},r.appendTo=function(t){return v(t).append(this),this},r.empty=function(){for(var t,e=0,n=this.length;n>e;e++)for(t=this[e];t.lastChild;)t.removeChild(t.lastChild);return this},r.remove=function(){var t,e=0,n=this.length;for(this.off();n>e;e++)t=this[e],delete t.jdata,t.parentNode&&t.parentNode.removeChild(t);return this},"object"==typeof n&&n&&"object"==typeof n.exports?n.exports=v:"function"==typeof t&&t.amd?(t(function(){return v}),e.jBone=e.$=v):"object"==typeof e&&"object"==typeof e.document&&(e.jBone=e.$=v)}(window)},{}],6:[function(e,n,i){(function(){var e=this,o=e._,r=Array.prototype,s=Object.prototype,a=Function.prototype,l=r.push,c=r.slice,h=r.concat,u=s.toString,f=s.hasOwnProperty,_=Array.isArray,d=Object.keys,p=a.bind,m=function(t){return t instanceof m?t:this instanceof m?void(this._wrapped=t):new m(t)};"undefined"!=typeof i?("undefined"!=typeof n&&n.exports&&(i=n.exports=m),i._=m):e._=m,m.VERSION="1.7.0";var g=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,o){return t.call(e,n,i,o)};case 4:return function(n,i,o,r){return t.call(e,n,i,o,r)}}return function(){return t.apply(e,arguments)}};m.iteratee=function(t,e,n){return null==t?m.identity:m.isFunction(t)?g(t,e,n):m.isObject(t)?m.matches(t):m.property(t)},m.each=m.forEach=function(t,e,n){if(null==t)return t;e=g(e,n);var i,o=t.length;if(o===+o)for(i=0;o>i;i++)e(t[i],i,t);else{var r=m.keys(t);for(i=0,o=r.length;o>i;i++)e(t[r[i]],r[i],t)}return t},m.map=m.collect=function(t,e,n){if(null==t)return[];e=m.iteratee(e,n);for(var i,o=t.length!==+t.length&&m.keys(t),r=(o||t).length,s=Array(r),a=0;r>a;a++)i=o?o[a]:a,s[a]=e(t[i],i,t);return s};var v="Reduce of empty array with no initial value";m.reduce=m.foldl=m.inject=function(t,e,n,i){null==t&&(t=[]),e=g(e,i,4);var o,r=t.length!==+t.length&&m.keys(t),s=(r||t).length,a=0;if(arguments.length<3){if(!s)throw new TypeError(v);n=t[r?r[a++]:a++]}for(;s>a;a++)o=r?r[a]:a,n=e(n,t[o],o,t);return n},m.reduceRight=m.foldr=function(t,e,n,i){null==t&&(t=[]),e=g(e,i,4);var o,r=t.length!==+t.length&&m.keys(t),s=(r||t).length;if(arguments.length<3){if(!s)throw new TypeError(v);n=t[r?r[--s]:--s]}for(;s--;)o=r?r[s]:s,n=e(n,t[o],o,t);return n},m.find=m.detect=function(t,e,n){var i;return e=m.iteratee(e,n),m.some(t,function(t,n,o){return e(t,n,o)?(i=t,!0):void 0}),i},m.filter=m.select=function(t,e,n){var i=[];return null==t?i:(e=m.iteratee(e,n),m.each(t,function(t,n,o){e(t,n,o)&&i.push(t)}),i)},m.reject=function(t,e,n){return m.filter(t,m.negate(m.iteratee(e)),n)},m.every=m.all=function(t,e,n){if(null==t)return!0;e=m.iteratee(e,n);var i,o,r=t.length!==+t.length&&m.keys(t),s=(r||t).length;for(i=0;s>i;i++)if(o=r?r[i]:i,!e(t[o],o,t))return!1;return!0},m.some=m.any=function(t,e,n){if(null==t)return!1;e=m.iteratee(e,n);var i,o,r=t.length!==+t.length&&m.keys(t),s=(r||t).length;for(i=0;s>i;i++)if(o=r?r[i]:i,e(t[o],o,t))return!0;return!1},m.contains=m.include=function(t,e){return null==t?!1:(t.length!==+t.length&&(t=m.values(t)),m.indexOf(t,e)>=0)},m.invoke=function(t,e){var n=c.call(arguments,2),i=m.isFunction(e);return m.map(t,function(t){return(i?e:t[e]).apply(t,n)})},m.pluck=function(t,e){return m.map(t,m.property(e))},m.where=function(t,e){return m.filter(t,m.matches(e))},m.findWhere=function(t,e){return m.find(t,m.matches(e))},m.max=function(t,e,n){var i,o,r=-1/0,s=-1/0;if(null==e&&null!=t){t=t.length===+t.length?t:m.values(t);for(var a=0,l=t.length;l>a;a++)i=t[a],i>r&&(r=i)}else e=m.iteratee(e,n),m.each(t,function(t,n,i){o=e(t,n,i),(o>s||o===-1/0&&r===-1/0)&&(r=t,s=o)});return r},m.min=function(t,e,n){var i,o,r=1/0,s=1/0;if(null==e&&null!=t){t=t.length===+t.length?t:m.values(t);for(var a=0,l=t.length;l>a;a++)i=t[a],r>i&&(r=i)}else e=m.iteratee(e,n),m.each(t,function(t,n,i){o=e(t,n,i),(s>o||1/0===o&&1/0===r)&&(r=t,s=o)});return r},m.shuffle=function(t){for(var e,n=t&&t.length===+t.length?t:m.values(t),i=n.length,o=Array(i),r=0;i>r;r++)e=m.random(0,r),e!==r&&(o[r]=o[e]),o[e]=n[r];return o},m.sample=function(t,e,n){return null==e||n?(t.length!==+t.length&&(t=m.values(t)),t[m.random(t.length-1)]):m.shuffle(t).slice(0,Math.max(0,e))},m.sortBy=function(t,e,n){return e=m.iteratee(e,n),m.pluck(m.map(t,function(t,n,i){return{value:t,index:n,criteria:e(t,n,i)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index-e.index}),"value")};var b=function(t){return function(e,n,i){var o={};return n=m.iteratee(n,i),m.each(e,function(i,r){var s=n(i,r,e);t(o,i,s)}),o}};m.groupBy=b(function(t,e,n){m.has(t,n)?t[n].push(e):t[n]=[e]}),m.indexBy=b(function(t,e,n){t[n]=e}),m.countBy=b(function(t,e,n){m.has(t,n)?t[n]++:t[n]=1}),m.sortedIndex=function(t,e,n,i){n=m.iteratee(n,i,1);for(var o=n(e),r=0,s=t.length;s>r;){var a=r+s>>>1;n(t[a])<o?r=a+1:s=a}return r},m.toArray=function(t){return t?m.isArray(t)?c.call(t):t.length===+t.length?m.map(t,m.identity):m.values(t):[]},m.size=function(t){return null==t?0:t.length===+t.length?t.length:m.keys(t).length},m.partition=function(t,e,n){e=m.iteratee(e,n);var i=[],o=[];return m.each(t,function(t,n,r){(e(t,n,r)?i:o).push(t)}),[i,o]},m.first=m.head=m.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:0>e?[]:c.call(t,0,e)},m.initial=function(t,e,n){return c.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},m.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:c.call(t,Math.max(t.length-e,0))},m.rest=m.tail=m.drop=function(t,e,n){return c.call(t,null==e||n?1:e)},m.compact=function(t){return m.filter(t,m.identity)};var x=function(t,e,n,i){if(e&&m.every(t,m.isArray))return h.apply(i,t);for(var o=0,r=t.length;r>o;o++){var s=t[o];m.isArray(s)||m.isArguments(s)?e?l.apply(i,s):x(s,e,n,i):n||i.push(s)}return i};m.flatten=function(t,e){return x(t,e,!1,[])},m.without=function(t){return m.difference(t,c.call(arguments,1))},m.uniq=m.unique=function(t,e,n,i){if(null==t)return[];m.isBoolean(e)||(i=n,n=e,e=!1),null!=n&&(n=m.iteratee(n,i));for(var o=[],r=[],s=0,a=t.length;a>s;s++){var l=t[s];if(e)s&&r===l||o.push(l),r=l;else if(n){var c=n(l,s,t);m.indexOf(r,c)<0&&(r.push(c),o.push(l))}else m.indexOf(o,l)<0&&o.push(l)}return o},m.union=function(){return m.uniq(x(arguments,!0,!0,[]))},m.intersection=function(t){if(null==t)return[];for(var e=[],n=arguments.length,i=0,o=t.length;o>i;i++){var r=t[i];if(!m.contains(e,r)){for(var s=1;n>s&&m.contains(arguments[s],r);s++);s===n&&e.push(r)}}return e},m.difference=function(t){var e=x(c.call(arguments,1),!0,!0,[]);return m.filter(t,function(t){return!m.contains(e,t)})},m.zip=function(t){if(null==t)return[];for(var e=m.max(arguments,"length").length,n=Array(e),i=0;e>i;i++)n[i]=m.pluck(arguments,i);return n},m.object=function(t,e){if(null==t)return{};for(var n={},i=0,o=t.length;o>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},m.indexOf=function(t,e,n){if(null==t)return-1;var i=0,o=t.length;if(n){if("number"!=typeof n)return i=m.sortedIndex(t,e),t[i]===e?i:-1;i=0>n?Math.max(0,o+n):n}for(;o>i;i++)if(t[i]===e)return i;return-1},m.lastIndexOf=function(t,e,n){if(null==t)return-1;var i=t.length;for("number"==typeof n&&(i=0>n?i+n+1:Math.min(i,n+1));--i>=0;)if(t[i]===e)return i;return-1},m.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=n||1;for(var i=Math.max(Math.ceil((e-t)/n),0),o=Array(i),r=0;i>r;r++,t+=n)o[r]=t;return o};var y=function(){};m.bind=function(t,e){var n,i;if(p&&t.bind===p)return p.apply(t,c.call(arguments,1));if(!m.isFunction(t))throw new TypeError("Bind must be called on a function");return n=c.call(arguments,2),i=function(){if(!(this instanceof i))return t.apply(e,n.concat(c.call(arguments)));y.prototype=t.prototype;var o=new y;y.prototype=null;var r=t.apply(o,n.concat(c.call(arguments)));return m.isObject(r)?r:o}},m.partial=function(t){var e=c.call(arguments,1);return function(){for(var n=0,i=e.slice(),o=0,r=i.length;r>o;o++)i[o]===m&&(i[o]=arguments[n++]);for(;n<arguments.length;)i.push(arguments[n++]);return t.apply(this,i)}},m.bindAll=function(t){var e,n,i=arguments.length;if(1>=i)throw new Error("bindAll must be passed function names");for(e=1;i>e;e++)n=arguments[e],t[n]=m.bind(t[n],t);return t},m.memoize=function(t,e){var n=function(i){var o=n.cache,r=e?e.apply(this,arguments):i;return m.has(o,r)||(o[r]=t.apply(this,arguments)),o[r]};return n.cache={},n},m.delay=function(t,e){var n=c.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},m.defer=function(t){return m.delay.apply(m,[t,1].concat(c.call(arguments,1)))},m.throttle=function(t,e,n){var i,o,r,s=null,a=0;n||(n={});var l=function(){a=n.leading===!1?0:m.now(),s=null,r=t.apply(i,o),s||(i=o=null)};return function(){var c=m.now();a||n.leading!==!1||(a=c);var h=e-(c-a);return i=this,o=arguments,0>=h||h>e?(clearTimeout(s),s=null,a=c,r=t.apply(i,o),s||(i=o=null)):s||n.trailing===!1||(s=setTimeout(l,h)),r}},m.debounce=function(t,e,n){var i,o,r,s,a,l=function(){var c=m.now()-s;e>c&&c>0?i=setTimeout(l,e-c):(i=null,n||(a=t.apply(r,o),i||(r=o=null)))};return function(){r=this,o=arguments,s=m.now();var c=n&&!i;return i||(i=setTimeout(l,e)),c&&(a=t.apply(r,o),r=o=null),a}},m.wrap=function(t,e){return m.partial(e,t)},m.negate=function(t){return function(){return!t.apply(this,arguments)}},m.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,i=t[e].apply(this,arguments);n--;)i=t[n].call(this,i);return i}},m.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},m.before=function(t,e){var n;return function(){return--t>0?n=e.apply(this,arguments):e=null,n}},m.once=m.partial(m.before,2),m.keys=function(t){if(!m.isObject(t))return[];if(d)return d(t);var e=[];for(var n in t)m.has(t,n)&&e.push(n);return e},m.values=function(t){for(var e=m.keys(t),n=e.length,i=Array(n),o=0;n>o;o++)i[o]=t[e[o]];return i},m.pairs=function(t){for(var e=m.keys(t),n=e.length,i=Array(n),o=0;n>o;o++)i[o]=[e[o],t[e[o]]];return i},m.invert=function(t){for(var e={},n=m.keys(t),i=0,o=n.length;o>i;i++)e[t[n[i]]]=n[i];return e},m.functions=m.methods=function(t){var e=[];for(var n in t)m.isFunction(t[n])&&e.push(n);return e.sort()},m.extend=function(t){if(!m.isObject(t))return t;for(var e,n,i=1,o=arguments.length;o>i;i++){e=arguments[i];for(n in e)f.call(e,n)&&(t[n]=e[n])}return t},m.pick=function(t,e,n){var i,o={};if(null==t)return o;if(m.isFunction(e)){e=g(e,n);for(i in t){var r=t[i];e(r,i,t)&&(o[i]=r)}}else{var s=h.apply([],c.call(arguments,1));t=new Object(t);for(var a=0,l=s.length;l>a;a++)i=s[a],i in t&&(o[i]=t[i])}return o},m.omit=function(t,e,n){if(m.isFunction(e))e=m.negate(e);else{var i=m.map(h.apply([],c.call(arguments,1)),String);e=function(t,e){return!m.contains(i,e)}}return m.pick(t,e,n)},m.defaults=function(t){if(!m.isObject(t))return t;for(var e=1,n=arguments.length;n>e;e++){var i=arguments[e];for(var o in i)void 0===t[o]&&(t[o]=i[o])}return t},m.clone=function(t){return m.isObject(t)?m.isArray(t)?t.slice():m.extend({},t):t},m.tap=function(t,e){return e(t),t};var w=function(t,e,n,i){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof m&&(t=t._wrapped),e instanceof m&&(e=e._wrapped);var o=u.call(t);if(o!==u.call(e))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}if("object"!=typeof t||"object"!=typeof e)return!1;for(var r=n.length;r--;)if(n[r]===t)return i[r]===e;var s=t.constructor,a=e.constructor;if(s!==a&&"constructor"in t&&"constructor"in e&&!(m.isFunction(s)&&s instanceof s&&m.isFunction(a)&&a instanceof a))return!1;n.push(t),i.push(e);var l,c;if("[object Array]"===o){if(l=t.length,c=l===e.length)for(;l--&&(c=w(t[l],e[l],n,i)););}else{var h,f=m.keys(t);if(l=f.length,c=m.keys(e).length===l)for(;l--&&(h=f[l],c=m.has(e,h)&&w(t[h],e[h],n,i)););}return n.pop(),i.pop(),c};m.isEqual=function(t,e){return w(t,e,[],[])},m.isEmpty=function(t){if(null==t)return!0;if(m.isArray(t)||m.isString(t)||m.isArguments(t))return 0===t.length;for(var e in t)if(m.has(t,e))return!1;return!0},m.isElement=function(t){return!(!t||1!==t.nodeType)},m.isArray=_||function(t){return"[object Array]"===u.call(t)},m.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},m.each(["Arguments","Function","String","Number","Date","RegExp"],function(t){m["is"+t]=function(e){return u.call(e)==="[object "+t+"]"}}),m.isArguments(arguments)||(m.isArguments=function(t){return m.has(t,"callee")}),"function"!=typeof/./&&(m.isFunction=function(t){return"function"==typeof t||!1}),m.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},m.isNaN=function(t){return m.isNumber(t)&&t!==+t},m.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===u.call(t)},m.isNull=function(t){return null===t},m.isUndefined=function(t){return void 0===t},m.has=function(t,e){return null!=t&&f.call(t,e)},m.noConflict=function(){return e._=o,this},m.identity=function(t){return t},m.constant=function(t){return function(){return t}},m.noop=function(){},m.property=function(t){return function(e){return e[t]}},m.matches=function(t){var e=m.pairs(t),n=e.length;return function(t){if(null==t)return!n;t=new Object(t);for(var i=0;n>i;i++){var o=e[i],r=o[0];if(o[1]!==t[r]||!(r in t))return!1}return!0}},m.times=function(t,e,n){var i=Array(Math.max(0,t));e=g(e,n,1);for(var o=0;t>o;o++)i[o]=e(o);return i},m.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},m.now=Date.now||function(){return(new Date).getTime()};var T={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},j=m.invert(T),S=function(t){var e=function(e){return t[e]},n="(?:"+m.keys(t).join("|")+")",i=RegExp(n),o=RegExp(n,"g");return function(t){return t=null==t?"":""+t,i.test(t)?t.replace(o,e):t}};m.escape=S(T),m.unescape=S(j),m.result=function(t,e){if(null==t)return void 0;var n=t[e];return m.isFunction(n)?t[e]():n};var A=0;m.uniqueId=function(t){var e=++A+"";return t?t+e:e},m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var z=/(.)^/,E={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},k=/\\|'|\r|\n|\u2028|\u2029/g,M=function(t){return"\\"+E[t]};m.template=function(t,e,n){!e&&n&&(e=n),e=m.defaults({},e,m.templateSettings);var i=RegExp([(e.escape||z).source,(e.interpolate||z).source,(e.evaluate||z).source].join("|")+"|$","g"),o=0,r="__p+='";t.replace(i,function(e,n,i,s,a){return r+=t.slice(o,a).replace(k,M),o=a+e.length,n?r+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?r+="'+\n((__t=("+i+"))==null?'':__t)+\n'":s&&(r+="';\n"+s+"\n__p+='"),e}),r+="';\n",e.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{var s=new Function(e.variable||"obj","_",r)}catch(a){throw a.source=r,a}var l=function(t){return s.call(this,t,m)},c=e.variable||"obj";return l.source="function("+c+"){\n"+r+"}",l},m.chain=function(t){var e=m(t);return e._chain=!0,e};var D=function(t){return this._chain?m(t).chain():t};m.mixin=function(t){m.each(m.functions(t),function(e){var n=m[e]=t[e];m.prototype[e]=function(){var t=[this._wrapped];return l.apply(t,arguments),D.call(this,n.apply(m,t))}})},m.mixin(m),m.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=r[t];m.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],D.call(this,n)}}),m.each(["concat","join","slice"],function(t){var e=r[t];m.prototype[t]=function(){return D.call(this,e.apply(this._wrapped,arguments))}}),m.prototype.value=function(){return this._wrapped},"function"==typeof t&&t.amd&&t("underscore",[],function(){return m})}).call(this)},{}],7:[function(t,e){e.exports=t(5)},{"/home/xsebi/ownCloud/projects/biojs.bak/packages/biojs-vis-seqlogo/node_modules/backbone-viewj/node_modules/jbone/dist/jbone.js":5}],8:[function(t,e){e.exports=t(6)},{"/home/xsebi/ownCloud/projects/biojs.bak/packages/biojs-vis-seqlogo/node_modules/backbone-viewj/node_modules/underscore/underscore.js":6}],9:[function(t,e){(function(t){e.exports="undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:{}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],10:[function(t,e){function n(t){var e=!1;return function(){return e?void 0:(e=!0,t.apply(this,arguments))}}e.exports=n,n.proto=n(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return n(this)},configurable:!0})})},{}],11:[function(t,e){function n(t,e,n){if(!s(e))throw new TypeError("iterator must be a function");arguments.length<3&&(n=this),"[object Array]"===a.call(t)?i(t,e,n):"string"==typeof t?o(t,e,n):r(t,e,n)}function i(t,e,n){for(var i=0,o=t.length;o>i;i++)l.call(t,i)&&e.call(n,t[i],i,t)}function o(t,e,n){for(var i=0,o=t.length;o>i;i++)e.call(n,t.charAt(i),i,t)}function r(t,e,n){for(var i in t)l.call(t,i)&&e.call(n,t[i],i,t)}var s=t("is-function");e.exports=n;var a=Object.prototype.toString,l=Object.prototype.hasOwnProperty},{"is-function":12}],12:[function(t,e){function n(t){var e=i.call(t);return"[object Function]"===e||"function"==typeof t&&"[object RegExp]"!==e||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)}e.exports=n;var i=Object.prototype.toString},{}],13:[function(t,e,n){function i(t){return t.replace(/^\s*|\s*$/g,"")}n=e.exports=i,n.left=function(t){return t.replace(/^\s*/,"")},n.right=function(t){return t.replace(/\s*$/,"")}},{}],14:[function(t,e){var n=t("trim"),i=t("for-each"),o=function(t){return"[object Array]"===Object.prototype.toString.call(t)};e.exports=function(t){if(!t)return{};var e={};return i(n(t).split("\n"),function(t){var i=t.indexOf(":"),r=n(t.slice(0,i)).toLowerCase(),s=n(t.slice(i+1));"undefined"==typeof e[r]?e[r]=s:o(e[r])?e[r].push(s):e[r]=[e[r],s]}),e}},{"for-each":11,trim:13}],15:[function(t,e){e.exports={render_x_axis_label:function(){var t="Model Position";this.display_ali_map&&(t="Alignment Column"),this.called_on.find(".logo_xaxis").remove(),this.called_on.prepend('<div class="logo_xaxis" class="centered" style="margin-left:40px"><p class="xaxis_text" style="width:10em;margin:1em auto">'+t+"</p></div>")},render_y_axis_label:function(){this.dom_element.parent().before('<canvas class="logo_yaxis" height="'+this.options.height+'" width="55"></canvas>');
var t=this.called_on.find(".logo_yaxis"),e=(Math.abs(this.data.max_height),isNaN(this.data.min_height_obs)?0:parseInt(this.data.min_height_obs,10),null),n="Information Content (bits)";e=t[0].getContext("2d"),e.beginPath(),e.moveTo(55,1),e.lineTo(40,1),e.moveTo(55,this.info_content_height),e.lineTo(40,this.info_content_height),e.moveTo(55,this.info_content_height/2),e.lineTo(40,this.info_content_height/2),e.lineWidth=1,e.strokeStyle="#666666",e.stroke(),e.fillStyle="#666666",e.textAlign="right",e.font="bold 10px Arial",e.textBaseline="top",e.fillText(parseFloat(this.data.max_height).toFixed(1),38,0),e.textBaseline="middle",e.fillText(parseFloat(this.data.max_height/2).toFixed(1),38,this.info_content_height/2),e.fillText("0",38,this.info_content_height),"score"===this.data.height_calc&&(n="Score (bits)"),e.save(),e.translate(5,this.height/2-20),e.rotate(-Math.PI/2),e.textAlign="center",e.font="normal 12px Arial",e.fillText(n,1,0),e.restore(),e.fillText("occupancy",55,this.info_content_height+7),this.show_inserts&&(e.fillText("ins. prob.",50,280),e.fillText("ins. len.",46,296))}}},{}],16:[function(t,e){var n=null;e.exports=function(){if(!n){var t=document.createElement("canvas");n=!(!t.getContext||!t.getContext("2d"))}return n}},{}],17:[function(t,e){e.exports={A:"#FF9966",C:"#009999",D:"#FF0000",E:"#CC0033",F:"#00FF00",G:"#f2f20c",H:"#660033",I:"#CC9933",K:"#663300",L:"#FF9933",M:"#CC99CC",N:"#336666",P:"#0099FF",Q:"#6666CC",R:"#990000",S:"#0000FF",T:"#00FFFF",V:"#FFCC33",W:"#66CC66",Y:"#006600"}},{}],18:[function(t,e){e.exports={A:"#cbf751",C:"#5ec0cc",G:"#ffdf59",T:"#b51f16",U:"#b51f16"}},{}],19:[function(t,e){var n=t("jbone");e.exports=function(t,e,i){t.find(".logo_settings_switch, .logo_settings .close").on("click",function(t){t.preventDefault(),n(".logo_settings").toggle()}),t.find(".logo_reset").on("click",function(t){t.preventDefault(),e.changeZoom({target:e.default_zoom})}),t.find(".logo_change").on("click",function(t){t.preventDefault()}),t.find(".logo_zoomin").on("click",function(t){t.preventDefault(),e.changeZoom({distance:.1,direction:"+"})}),t.find(".logo_zoomout").on("click",function(t){t.preventDefault(),e.changeZoom({distance:.1,direction:"-"})}),t.find(".logo_scale").on("change",function(){e.toggleScale(this.value)}),t.find(".logo_color").on("change",function(){e.toggleColorscheme(this.value)}),t.find(".logo_ali_map").on("change",function(){e.toggleAliMap(this.value)}),t.find(".logo_position").on("change",function(){this.value.match(/^\d+$/m)&&e.scrollToColumn(this.value,1)}),i.on("dblclick",function(n){console.log("dblclick",e),offset=e.logo_graphic.offset(),x=parseInt(n.pageX-offset.left,10),window_position=n.pageX-t.parent().offset().left,col=e.columnFromCoordinates(x),console.log("col",col),current=e.zoom,e.changeZoom(1>current?{target:1,offset:window_position,column:col}:{target:.3,offset:window_position,column:col})}),n(document).on(t.attr("id")+".scrolledTo",function(t,n){e.render({target:n})}),n(document).on("keydown",function(t){t.ctrlKey||((61===t.which||107===t.which)&&(zoom+=.1,e.changeZoom({distance:.1,direction:"+"})),(109===t.which||0===t.which)&&(zoom-=.1,e.changeZoom({distance:.1,direction:"-"})))})}},{jbone:7}],20:[function(t,e){_=t("underscore");var n=t("./canvasSupport.js"),i=t("./render/render.js"),o=t("./model/letter.js"),r=t("backbone-viewj"),s=t("./axis"),a=t("./eventListener.js"),l=t("./info/settings.js"),c=t("jbone");e.exports=r.extend({options:{xaxis:!0,yaxis:!0,height:300,column_width:34,debug:!0,scale_height_enabled:!0,scaled_max:!0,zoom_buttons:!0,colorscheme:"default",data:void 0,start:1,end:void 0,zoom:.4,colors:void 0,divider:!1,show_probs:!1,divider_step:5,show_divider:!1,border:!1,settings:!1,scroller:!0,positionMarker:!0},loadDefault:function(e){this.data=e.data,this.display_ali_map=0,this.alphabet=e.data.alphabet||"dna",this.start=e.start,this.zoom=parseFloat(e.zoom)||.4,this.default_zoom=this.zoom,this.column_width=e.column_width,this.height=e.height,this.canvas_width=5e3,this.scale_height_enabled=e.scale_height_enabled,this.scrollme=null,this.previous_target=0,this.rendered=[],this.previous_zoom=0,void 0==this.data.max_height&&(this.data.max_height=this.calcMaxHeight(this.data.heightArr)),this.data.insert_probs&&this.data.delete_probs||(this.options.show_probs=!1),this.data.max_height=e.scaled_max?e.data.max_height_obs||this.data.max_height||2:e.data.max_height_theory||this.data.max_height||2,e.colors?this.changeColors(e.colors):"aa"===this.alphabet?(this.aa_colors=t("./colors/aa.js"),this.changeColors(this.aa_colors)):(this.dna_colors=t("./colors/dna.js"),this.changeColors(this.dna_colors))},initialize:function(t){if(!n())return void(this.el.textContent="Your browser doesn't support canvas.");void 0==t.data&&(this.el.textContent="No data added."),_.extend(this.options,t);var e=this.options;if(this.loadDefault(e),this.options.show_probs?this.data.processing&&/^observed|weighted/.test(this.data.processing)?(this.show_inserts=0,this.info_content_height=this.height-14):(this.show_inserts=1,this.info_content_height=this.height-44):this.info_content_height=this.height,this.$el=c(this.el),this.initDivs(),this.options.settings){var i=l(this,e);this.$el.append(i)}a(this.$el,this,this.logo_graphic)},initDivs:function(){var t=h("div");t.className="logo_graphic",this.logo_graphic=c(t);var e=h("div");if(e.className="logo_container",e.style.height=this.height,this.container=c(e),this.container.append(t),this.$el.append(e),this.options.divider){var n=h("div");n.className="logo_divider",this.$el.append(n)}this.dom_element=c(t),this.called_on=this.$el,this.options.xaxis&&s.render_x_axis_label.call(this),this.options.yaxis?s.render_y_axis_label.call(this):this.container[0].style.marginLeft="0px"},render:function(){return i.call(this),this},changeColors:function(t){this.colors=t;var e=void 0!=t&&"string"!=typeof t.A;e&&(this.colorscheme="dynamic"),this.buildAlphabet()},buildAlphabet:function(){this.letters={};var t=this.colors;if(this.colorscheme="dynamic"){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");t={},e.forEach(function(e){t[e]=""})}for(var n in t)if(t.hasOwnProperty(n)){var i={color:t[n]};this.letters[n]=new o(n,i)}},toggleColorscheme:function(t){var e=this.currentColumn();this.colorscheme=t?"default"===t?"default":"consensus":"default"===this.colorscheme?"consensus":"default",this.rendered=[],this.scrollme.reflow(),this.scrollToColumn(e+1),this.scrollToColumn(e)},toggleScale:function(t){var e=this.currentColumn();this.data.max_height=t?"obs"===t?this.data.max_height_obs:this.data.max_height_theory:this.data.max_height===this.data.max_height_obs?this.data.max_height_theory:this.data.max_height_obs,this.rendered=[],this.logoYAxis&&this.logoYAxis.remove(),s.render_y_axis_label.call(this),this.scrollme.reflow(),this.scrollToColumn(e+1),this.scrollToColumn(e)},toggleAliMap:function(t){var e=this.currentColumn();this.display_ali_map=t?"model"===t?0:1:1===this.display_ali_map?0:1,s.render_x_axis_label(this),this.rendered=[],this.scrollme.reflow(),this.scrollToColumn(e+1),this.scrollToColumn(e)},currentColumn:function(){var t=this.scrollme.scroller.getValues().left,e=this.column_width*this.zoom,n=t/e,i=this.container.width()/e/2,o=Math.ceil(n+i);return o},changeZoom:function(t){var e=.3,n=null;if(t.target?e=t.target:t.distance&&(e=(parseFloat(this.zoom)-parseFloat(t.distance)).toFixed(1),"+"===t.direction&&(e=(parseFloat(this.zoom)+parseFloat(t.distance)).toFixed(1))),e>1?e=1:.1>e&&(e=.1),n=this.logo_graphic.width()*e/this.zoom,n>this.container.width())if(t.column){this.zoom=e,this.render({zoom:this.zoom}),this.scrollme.reflow();var i=this.coordinatesFromColumn(t.column);this.scrollme.scroller.scrollTo(i-t.offset)}else{var o=this.currentColumn();this.zoom=e,this.render({zoom:this.zoom}),this.scrollme.reflow(),this.scrollToColumn(o)}return this.zoom},columnFromCoordinates:function(t){var e=Math.ceil(t/(this.column_width*this.zoom));return e},coordinatesFromColumn:function(t){var e=t-1,n=e*this.column_width*this.zoom+this.column_width*this.zoom/2;return n},scrollToColumn:function(t,e){var n=this.logo_container.width()/2,i=this.coordinatesFromColumn(t);this.scrollme.scroller.scrollTo(i-n,0,e)},calcMaxHeight:function(t){return t.reduce(function(t,e){var n=0;for(var i in e)n+=e[i];return n>t?n:t},0)}});var h=function(t){return document.createElement(t)}},{"./axis":15,"./canvasSupport.js":16,"./colors/aa.js":17,"./colors/dna.js":18,"./eventListener.js":19,"./info/settings.js":21,"./model/letter.js":22,"./render/render.js":26,"backbone-viewj":1,jbone:7,underscore:8}],21:[function(t,e){var n=t("jbone");e.exports=function(t,e){var i=n('<form class="logo_form"><fieldset><label for="position">Column number</label><input type="text" name="position" class="logo_position"></input><button class="button logo_change">Go</button></fieldset></form>'),o=n('<div class="logo_settings"></div>');if(o.append('<span class="close">x</span>'),t.scale_height_enabled&&t.data.max_height_obs<t.data.max_height_theory){var r="",s="",a="",l="";t.data.max_height_obs===t.data.max_height?r="checked":s="checked"}var c='<fieldset><legend>Scale</legend><label><input type="radio" name="scale" class="logo_scale" value="obs" '+r+"/>Maximum Observed "+l+'</label></br><label><input type="radio" name="scale" class="logo_scale" value="theory" '+s+"/>Maximum Theoretical "+a+"</label></fieldset>";if(o.append(c),"score"!==t.data.height_calc&&"aa"===t.data.alphabet&&t.data.probs_arr){var h=null,u=null,f="",_="";"default"===t.colorscheme?h="checked":u="checked",e.help&&(f='<a class="help" href="/help#colors_default" title="Each letter receives its own color."><span aria-hidden="true" data-icon="?"></span><span class="reader-text">help</span></a>',_='<a class="help" href="/help#colors_consensus" title="Letters are colored as in Clustalx and Jalview, with colors depending on composition of the column."><span aria-hidden="true" data-icon="?"></span><span class="reader-text">help</span></a>');var d='<fieldset><legend>Color Scheme</legend><label><input type="radio" name="color" class="logo_color" value="default" '+h+"/>Default "+f+'</label></br><label><input type="radio" name="color" class="logo_color" value="consensus" '+u+"/>Consensus Colors "+_+"</label></fieldset>";o.append(d)}if(t.data.ali_map){var p=null,m=null,g="",v="";0===t.display_ali_map?p="checked":m="checked",e.help&&(g='<a class="help" href="/help#coords_model" title="The coordinates along the top of the plot show the model position."><span aria-hidden="true" data-icon="?"></span><span class="reader-text">help</span></a>',v='<a class="help" href="/help#coords_ali" title="The coordinates along the top of the plot show the column in the alignment associated with the model"><span aria-hidden="true" data-icon="?"></span><span class="reader-text">help</span></a>');var b='<fieldset><legend>Coordinates</legend><label><input type="radio" name="coords" class="logo_ali_map" value="model" '+p+"/>Model "+g+'</label></br><label><input type="radio" name="coords" class="logo_ali_map" value="alignment" '+m+"/>Alignment "+v+"</label></fieldset>";o.append(b)}var x=n('<div class="logo_controls"></div>');return t.zoom_enabled&&x.append('<button class="logo_zoomout button">-</button><button class="logo_zoomin button">+</button>'),o.children().length>0&&(x.append('<button class="logo_settings_switch button">Settings</button>'),x.append(o)),i.append(x),i}},{jbone:7}],22:[function(t,e){e.exports=function(t,e){e=e||{},this.value=t,this.width=parseInt(e.width,10)||100,"W"===this.value&&(this.width+=30*this.width/100),this.height=parseInt(e.height,10)||100,this.color=e.color||"#000000",this.fontSize=e.fontSize||138,this.scaled=function(){},this.draw=function(t,e,n,i,o,r){var s=e/this.height,a=n/this.width,l=t.font;t.transform(a,0,0,s,i,o),t.fillStyle=r||this.color,t.textAlign="center",t.font="bold "+this.fontSize+"px Arial",t.fillText(this.value,0,0),t.setTransform(1,0,0,1,0,0),t.fillStyle="#000000",t.font=l}}},{}],23:[function(t,e){e.exports=function(t,e,n){t.beginPath(),t.moveTo(0,e),t.lineTo(n,e),t.lineWidth=1,t.strokeStyle="#999999",t.stroke()}},{}],24:[function(t,e){e.exports=function(t,e,n,i,o,r,s){t.font=r+"px Arial",t.textAlign=s?"right":"center",t.fillStyle="#666666",t.fillText(o,e+i/2,n)}},{}],25:[function(t,e){e.exports=function(t,e,n,i,o){o=o||"#999999",t.beginPath(),t.moveTo(e,n),t.lineTo(e,n+i),t.lineWidth=1,t.strokeStyle=o,t.stroke()}},{}],26:[function(t,e){function n(t,e,n,i,o){var s=r(t).find("#canv_"+i);return s.length||(r(t).append('<canvas class="canvas_logo" id="canv_'+i+'"  height="'+e+'" width="'+n+'" style="left:'+o*i+'px"></canvas>'),s=r(t).find("#canv_"+i)),r(s).attr("width",n).attr("height",e),s[0]}var i=t("./render_with_text.js"),o=t("./render_with_rects.js"),r=t("jbone");e.exports=function(t){if(this.data){t=t||{};var e=t.zoom||this.zoom,r=t.target||1,s=(t.scaled||null,this.dom_element.parent().attr("width")),a=1,l=null,c=null,h=0;if(this.previous_target=r,t.start&&(this.start=t.start),t.end&&(this.end=t.end),.1>=e?e=.1:e>=1&&(e=1),this.zoom=e,l=this.end||this.data.heightArr.length,c=this.start||1,l=l>this.data.heightArr.length?this.data.heightArr.length:l,l=c>l?c:l,c=c>l?l:c,c=c>1?c:1,this.y=this.height-20,this.max_width=this.column_width*(l-c+1),s>this.max_width&&(e=1,this.zoom_enabled=!1),this.zoom=e,this.zoomed_column=this.column_width*e,this.total_width=this.zoomed_column*(l-c+1),1>e)for(;this.total_width<s&&(this.zoom+=.1,this.zoomed_column=this.column_width*this.zoom,this.total_width=this.zoomed_column*(l-c+1),this.zoom_enabled=!1,!(e>=1)););r>this.total_width&&(r=this.total_width),this.dom_element.attr({width:this.total_width+"px"}).css({width:this.total_width+"px"});var u=Math.ceil(this.total_width/this.canvas_width);for(this.columns_per_canvas=Math.ceil(this.canvas_width/this.zoomed_column),this.previous_zoom!==this.zoom&&(this.dom_element.find("canvas").remove(),this.previous_zoom=this.zoom,this.rendered=[]),this.canvases=[],this.contexts=[],h=0;u>h;h++){var f=this.columns_per_canvas*h+c,_=f+this.columns_per_canvas-1;_>l&&(_=l);var d=(_-f+1)*this.zoomed_column;d>a&&(a=d);var p=a*h,m=p+d;if(m+m/2>r&&r>p-p/2)if(this.canvases[h]=n(this.dom_element,this.height,d,h,a),this.contexts[h]=this.canvases[h].getContext("2d"),this.contexts[h].setTransform(1,0,0,1,0,0),this.contexts[h].clearRect(0,0,d,this.height),this.contexts[h].fillStyle="#ffffff",this.contexts[h].fillRect(0,0,m,this.height),this.zoomed_column>12){var g=parseInt(10*e,10);g=g>10?10:g,this.debug&&o.call(this,f,_,h,1),i.call(this,f,_,h,g)}else o.call(this,f,_,h)}!this.scrollme&&this.options.scroller&&(this.scrollme=new EasyScroller(this.dom_element[0],{scrollingX:1,scrollingY:0,eventTarget:this.called_on})),1!==r&&this.scrollme.reflow()}}},{"./render_with_rects.js":27,"./render_with_text.js":28,jbone:7}],27:[function(t,e){function n(t,e,n,i,o,r,s,a){var l="#ffffff";a?(o>.1?l="#d7301f":o>.05?l="#fc8d59":o>.03&&(l="#fdcc8a"),t.fillStyle=l,t.fillRect(e,n+15,i,10),l="#ffffff",r>9?l="#d7301f":r>7?l="#fc8d59":r>4&&(l="#fdcc8a"),t.fillStyle=l,t.fillRect(e,n+30,i,10)):n+=30,l="#ffffff",.75>s?l="#2171b5":.85>s?l="#6baed6":.95>s&&(l="#bdd7e7"),t.fillStyle=l,t.fillRect(e,n,i,10)}var i=t("./draw/border.js"),o=t("./draw/ticks.js"),r=t("./draw/column_number.js");e.exports=function(t,e,s,a){var l=0,c=t,h=null,u=0,f=Math.abs(this.data.max_height),_=Math.abs(this.data.min_height_obs),d=f+_,p=Math.round(100*Math.abs(this.data.max_height)/d),m=Math.round(this.info_content_height*p/100),g=(this.info_content_height-m,10);for(u=t;e>=u;u++){if(this.data.mmline&&1===this.data.mmline[u-1])this.contexts[s].fillStyle="#cccccc",this.contexts[s].fillRect(l,10,this.zoomed_column,this.height-40);else{var v=this.data.heightArr[u-1],b=0,x=(v.length,0);for(var x in v)if(values=[x,v[x]],values[1]>.01){var y=parseFloat(values[1])/this.data.max_height,w=l,T=(this.info_content_height-2)*y,j=this.info_content_height-2-b-T,S=null;S="dynamic"===this.colorscheme?this.colors.getColor(values[0],{pos:u}):"consensus"===this.colorscheme?this.cmap[u-1][values[0]]||"#7a7a7a":this.colors[values[0]],a?(this.contexts[s].strokeStyle=S,this.contexts[s].strokeRect(w,j,this.zoomed_column,T)):(this.contexts[s].fillStyle=S,this.contexts[s].fillRect(w,j,this.zoomed_column,T)),b+=T}}this.zoom<.2?g=20:this.zoom<.3&&(g=10),this.options.positionMarker&&u%g===0&&(this.options.show_probs&&o(this.contexts[s],l+this.zoomed_column,this.height-30,parseFloat(this.height),"#dddddd"),o(this.contexts[s],l+this.zoomed_column,0,5),h=this.display_ali_map?this.data.ali_map[u-1]:c,r(this.contexts[s],l-2,10,this.zoomed_column,h,10,!0)),this.options.show_probs&&n(this.contexts[s],l,this.height-42,this.zoomed_column,this.data.insert_probs[u-1],this.data.insert_lengths[u-1],this.data.delete_probs[u-1],this.show_inserts),this.options.show_probs&&(this.show_inserts?i(this.contexts[s],this.height-45,this.total_width):i(this.contexts[s],this.height-15,this.total_width)),this.options.border&&i(this.contexts[s],0,this.total_width),l+=this.zoomed_column,c++}}},{"./draw/border.js":23,"./draw/column_number.js":24,"./draw/ticks.js":25}],28:[function(t,e){function n(t,e,n,o,r,s,a){var l=n-4,c="#ffffff",h="#555555";a&&(l=n-35),.75>r?(c="#2171b5",h="#ffffff"):.85>r?c="#6baed6":.95>r&&(c="#bdd7e7"),i(t,e,l,r,s,o,c,h)}function i(t,e,n,i,o,r,s,a){t.font=o+"px Arial",t.fillStyle=s,t.fillRect(e,n-10,r,14),t.textAlign="center",t.fillStyle=a,t.fillText(i,e+r/2,n)}function o(t,e){var n=e.ralign?e.x+t.zoomed_column:e.x,i=e.ralign?e.x+2:e.x;l(t.contexts[e.context_num],n,t.height-30,-30-t.height,"#dddddd"),l(t.contexts[e.context_num],n,0,5),c(t.contexts[e.context_num],i,10,t.zoomed_column,e.column_num,e.fontsize,e.ralign)}function r(t,e,n,o,r,s){var a=n-20,c="#ffffff",h="#555555";r>.1?(c="#d7301f",h="#ffffff"):r>.05?c="#fc8d59":r>.03&&(c="#fdcc8a"),i(t,e,a,r,s,o,c,h),r>.03&&l(t,e+o,n-30,-30-n,c)}function s(t,e,n,o,r,s){var a="#ffffff",l="#555555";r>9?(a="#d7301f",l="#ffffff"):r>7?a="#fc8d59":r>4&&(a="#fdcc8a"),i(t,e,n,r,s,o,a,l)}var a=t("./draw/border.js"),l=t("./draw/ticks.js"),c=t("./draw/column_number.js");e.exports=function(t,e,i,c){{var h=0,u=t,f=null,_=0,d=Math.abs(this.data.max_height),p=isNaN(this.data.min_height_obs)?0:parseInt(this.data.min_height_obs,10),m=d+Math.abs(p),g=Math.round(100*Math.abs(this.data.max_height)/m),v=Math.round(this.info_content_height*g/100),b=this.info_content_height-v;v/this.info_content_height,b/this.info_content_height}for(e+3<=this.end&&(e+=3),_=t;e>=_;_++){if(this.data.mmline&&1===this.data.mmline[_-1])this.contexts[i].fillStyle="#cccccc",this.contexts[i].fillRect(h,10,this.zoomed_column,this.height-40);else{var x=this.data.heightArr[_-1],y=[];if(x){var w=0,T=(x.length,0),j=null;for(var T in x){var S=x[T],A=[T,S];if(x_pos=h+this.zoomed_column/2,letter_height=null,A[1]>.01){letter_height=parseFloat(A[1])/this.data.max_height;var z=this.info_content_height-2-w,E=(this.info_content_height-2)*letter_height;y[T]=[E,this.zoomed_column,x_pos,z],w+=E}}for(var T in x)y[T]&&this.letters[T]&&(j="dynamic"===this.colorscheme?this.colors.getColor(A[0],{pos:_}):"consensus"===this.colorscheme?this.cmap[_-1][T]||"#7a7a7a":null,this.letters[T].draw(this.contexts[i],y[T][0],y[T][1],y[T][2],y[T][3],j))}}f=this.display_ali_map?this.data.ali_map[_-1]:u,this.options.show_divider&&(this.zoom<.7?_%this.options.divider_step===0&&o(this,{context_num:i,x:h,fontsize:10,column_num:f,ralign:!0}):o(this,{context_num:i,x:h,fontsize:c,column_num:f})),this.options.show_probs&&(n(this.contexts[i],h,this.height,this.zoomed_column,this.data.delete_probs[_-1],c,this.show_inserts),l(this.contexts[i],h,this.height-15,5),this.show_inserts&&(r(this.contexts[i],h,this.height,this.zoomed_column,this.data.insert_probs[_-1],c),s(this.contexts[i],h,this.height-5,this.zoomed_column,this.data.insert_lengths[_-1],c),l(this.contexts[i],h,this.height-45,5),l(this.contexts[i],h,this.height-30,5))),h+=this.zoomed_column,u++}this.options.show_probs&&(this.show_inserts&&(a(this.contexts[i],this.height-30,this.total_width),a(this.contexts[i],this.height-45,this.total_width)),a(this.contexts[i],this.height-15,this.total_width)),this.options.border&&a(this.contexts[i],0,this.total_width)}},{"./draw/border.js":23,"./draw/column_number.js":24,"./draw/ticks.js":25}],29:[function(t,e){var n=t("./Scroller.js"),i=t("jbone"),o=function(t,e){this.content=t,this.container=t.parentNode,this.options=e||{};var i=this;this.scroller=new n(function(t,e,n){i.render(t,e,n)},e),this.bindEvents(),this.content.style[o.vendorPrefix+"TransformOrigin"]="left top",this.reflow()};o.prototype.render=function(){var t,e=document.documentElement.style;window.opera&&"[object Opera]"===Object.prototype.toString.call(opera)?t="presto":"MozAppearance"in e?t="gecko":"WebkitAppearance"in e?t="webkit":"string"==typeof navigator.cpuClass&&(t="trident");var n,i=o.vendorPrefix={trident:"ms",gecko:"Moz",webkit:"Webkit",presto:"O"}[t],r=document.createElement("div"),s=i+"Perspective",a=i+"Transform";return r.style[s]!==n?function(t,e,n){this.content.style[a]="translate3d("+-t+"px,"+-e+"px,0) scale("+n+")"}:r.style[a]!==n?function(t,e,n){this.content.style[a]="translate("+-t+"px,"+-e+"px) scale("+n+")"}:function(t,e,n){this.content.style.marginLeft=t?-t/n+"px":"",this.content.style.marginTop=e?-e/n+"px":"",this.content.style.zoom=n||""}}(),o.prototype.reflow=function(){this.scroller.setDimensions(this.container.clientWidth,this.container.clientHeight,this.content.offsetWidth,this.content.offsetHeight);var t=this.container.getBoundingClientRect();this.scroller.setPosition(t.left+this.container.clientLeft,t.top+this.container.clientTop)},o.prototype.bindEvents=function(){var t=this;if(i(window).on("resize",function(){t.reflow()}),i("#modelTab").on("click",function(){t.reflow()}),"ontouchstart"in window)this.container.addEventListener("touchstart",function(e){e.touches[0]&&e.touches[0].target&&e.touches[0].target.tagName.match(/input|textarea|select/i)||(t.scroller.doTouchStart(e.touches,(new Date).getTime()),e.preventDefault())},!1),document.addEventListener("touchmove",function(e){t.scroller.doTouchMove(e.touches,(new Date).getTime(),e.scale)},!1),document.addEventListener("touchend",function(){t.scroller.doTouchEnd((new Date).getTime())},!1),document.addEventListener("touchcancel",function(){t.scroller.doTouchEnd((new Date).getTime())},!1);else{var e=!1;i(this.container).on("mousedown",function(n){n.target.tagName.match(/input|textarea|select/i)||(t.scroller.doTouchStart([{pageX:n.pageX,pageY:n.pageY}],(new Date).getTime()),e=!0,n.preventDefault())}),i(document).on("mousemove",function(n){e&&(t.scroller.doTouchMove([{pageX:n.pageX,pageY:n.pageY}],(new Date).getTime()),e=!0)}),i(document).on("mouseup",function(){e&&(t.scroller.doTouchEnd((new Date).getTime()),e=!1)}),i(this.container).on("mousewheel",function(e){t.options.zooming&&(t.scroller.doMouseZoom(e.wheelDelta,(new Date).getTime(),e.pageX,e.pageY),e.preventDefault())})}},e.exports=o},{"./Scroller.js":30,jbone:7}],30:[function(t,e){var n,i=t("./core.js"),o=t("jbone");!function(){n=function(t,e){this.__callback=t,this.options={scrollingX:!0,scrollingY:!0,animating:!0,bouncing:!0,locking:!0,paging:!1,snapping:!1,zooming:!1,minZoom:.5,maxZoom:3,eventTarget:null};for(var n in e)this.options[n]=e[n]};var t=function(t){return Math.pow(t-1,3)+1},e=function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)},r={__isSingleTouch:!1,__isTracking:!1,__isGesturing:!1,__isDragging:!1,__isDecelerating:!1,__isAnimating:!1,__clientLeft:0,__clientTop:0,__clientWidth:0,__clientHeight:0,__contentWidth:0,__contentHeight:0,__snapWidth:100,__snapHeight:100,__refreshHeight:null,__refreshActive:!1,__refreshActivate:null,__refreshDeactivate:null,__refreshStart:null,__zoomLevel:1,__scrollLeft:0,__scrollTop:0,__maxScrollLeft:0,__maxScrollTop:0,__scheduledLeft:0,__scheduledTop:0,__scheduledZoom:0,__lastTouchLeft:null,__lastTouchTop:null,__lastTouchMove:null,__positions:null,__minDecelerationScrollLeft:null,__minDecelerationScrollTop:null,__maxDecelerationScrollLeft:null,__maxDecelerationScrollTop:null,__decelerationVelocityX:null,__decelerationVelocityY:null,setDimensions:function(t,e,n,i){var o=this;t&&(o.__clientWidth=t),e&&(o.__clientHeight=e),n&&(o.__contentWidth=n),i&&(o.__contentHeight=i),o.__computeScrollMax(),o.scrollTo(o.__scrollLeft,o.__scrollTop,!0)},setPosition:function(t,e){var n=this;n.__clientLeft=t||0,n.__clientTop=e||0},setSnapSize:function(t,e){var n=this;n.__snapWidth=t,n.__snapHeight=e},activatePullToRefresh:function(t,e,n,i){var o=this;o.__refreshHeight=t,o.__refreshActivate=e,o.__refreshDeactivate=n,o.__refreshStart=i},finishPullToRefresh:function(){var t=this;t.__refreshActive=!1,t.__refreshDeactivate&&t.__refreshDeactivate(),t.scrollTo(t.__scrollLeft,t.__scrollTop,!0)},getValues:function(){var t=this;return{left:t.__scrollLeft,top:t.__scrollTop,zoom:t.__zoomLevel}},getScrollMax:function(){var t=this;return{left:t.__maxScrollLeft,top:t.__maxScrollTop}},zoomTo:function(t,e,n,o){var r=this;if(!r.options.zooming)throw new Error("Zooming is not enabled!");r.__isDecelerating&&(i.effect.Animate.stop(r.__isDecelerating),r.__isDecelerating=!1);var s=r.__zoomLevel;null==n&&(n=r.__clientWidth/2),null==o&&(o=r.__clientHeight/2),t=Math.max(Math.min(t,r.options.maxZoom),r.options.minZoom),r.__computeScrollMax(t);var a=(n+r.__scrollLeft)*t/s-n,l=(o+r.__scrollTop)*t/s-o;a>r.__maxScrollLeft?a=r.__maxScrollLeft:0>a&&(a=0),l>r.__maxScrollTop?l=r.__maxScrollTop:0>l&&(l=0),r.__publish(a,l,t,e)},zoomBy:function(t,e,n,i){var o=this;o.zoomTo(o.__zoomLevel*t,e,n,i)},scrollTo:function(t,e,n,r){o(document).trigger(this.options.eventTarget.attr("id")+".scrolledTo",[t,e,r]);var s=this;if(s.__isDecelerating&&(i.effect.Animate.stop(s.__isDecelerating),s.__isDecelerating=!1),null!=r&&r!==s.__zoomLevel){if(!s.options.zooming)throw new Error("Zooming is not enabled!");t*=r,e*=r,s.__computeScrollMax(r)}else r=s.__zoomLevel;s.options.scrollingX?s.options.paging?t=Math.round(t/s.__clientWidth)*s.__clientWidth:s.options.snapping&&(t=Math.round(t/s.__snapWidth)*s.__snapWidth):t=s.__scrollLeft,s.options.scrollingY?s.options.paging?e=Math.round(e/s.__clientHeight)*s.__clientHeight:s.options.snapping&&(e=Math.round(e/s.__snapHeight)*s.__snapHeight):e=s.__scrollTop,t=Math.max(Math.min(s.__maxScrollLeft,t),0),e=Math.max(Math.min(s.__maxScrollTop,e),0),t===s.__scrollLeft&&e===s.__scrollTop&&(n=!1),s.__publish(t,e,r,n)},scrollBy:function(t,e,n){var i=this,o=i.__isAnimating?i.__scheduledLeft:i.__scrollLeft,r=i.__isAnimating?i.__scheduledTop:i.__scrollTop;i.scrollTo(o+(t||0),r+(e||0),n)},doMouseZoom:function(t,e,n,i){var o=this,r=t>0?.97:1.03;return o.zoomTo(o.__zoomLevel*r,!1,n-o.__clientLeft,i-o.__clientTop)},doTouchStart:function(t,e){if(null==t.length)throw new Error("Invalid touch list: "+t);if(e instanceof Date&&(e=e.valueOf()),"number"!=typeof e)throw new Error("Invalid timestamp value: "+e);var n=this;n.__isDecelerating&&(i.effect.Animate.stop(n.__isDecelerating),n.__isDecelerating=!1),n.__isAnimating&&(i.effect.Animate.stop(n.__isAnimating),n.__isAnimating=!1);var o,r,s=1===t.length;s?(o=t[0].pageX,r=t[0].pageY):(o=Math.abs(t[0].pageX+t[1].pageX)/2,r=Math.abs(t[0].pageY+t[1].pageY)/2),n.__initialTouchLeft=o,n.__initialTouchTop=r,n.__zoomLevelStart=n.__zoomLevel,n.__lastTouchLeft=o,n.__lastTouchTop=r,n.__lastTouchMove=e,n.__lastScale=1,n.__enableScrollX=!s&&n.options.scrollingX,n.__enableScrollY=!s&&n.options.scrollingY,n.__isTracking=!0,n.__isDragging=!s,n.__isSingleTouch=s,n.__positions=[]},doTouchMove:function(t,e,n){if(null==t.length)throw new Error("Invalid touch list: "+t);if(e instanceof Date&&(e=e.valueOf()),"number"!=typeof e)throw new Error("Invalid timestamp value: "+e);var i=this;if(i.__isTracking){var o,r;2===t.length?(o=Math.abs(t[0].pageX+t[1].pageX)/2,r=Math.abs(t[0].pageY+t[1].pageY)/2):(o=t[0].pageX,r=t[0].pageY);var s=i.__positions;if(i.__isDragging){var a=o-i.__lastTouchLeft,l=r-i.__lastTouchTop,c=i.__scrollLeft,h=i.__scrollTop,u=i.__zoomLevel;if(null!=n&&i.options.zooming){var f=u;if(u=u/i.__lastScale*n,u=Math.max(Math.min(u,i.options.maxZoom),i.options.minZoom),f!==u){var _=o-i.__clientLeft,d=r-i.__clientTop;c=(_+c)*u/f-_,h=(d+h)*u/f-d,i.__computeScrollMax(u)}}if(i.__enableScrollX){c-=a;var p=i.__maxScrollLeft;(c>p||0>c)&&(i.options.bouncing?c+=a/2:c=c>p?p:0)}if(i.__enableScrollY){h-=l;var m=i.__maxScrollTop;(h>m||0>h)&&(i.options.bouncing?(h+=l/2,i.__enableScrollX||null==i.__refreshHeight||(!i.__refreshActive&&h<=-i.__refreshHeight?(i.__refreshActive=!0,i.__refreshActivate&&i.__refreshActivate()):i.__refreshActive&&h>-i.__refreshHeight&&(i.__refreshActive=!1,i.__refreshDeactivate&&i.__refreshDeactivate()))):h=h>m?m:0)}s.length>60&&s.splice(0,30),s.push(c,h,e),i.__publish(c,h,u)}else{var g=i.options.locking?3:0,v=5,b=Math.abs(o-i.__initialTouchLeft),x=Math.abs(r-i.__initialTouchTop);i.__enableScrollX=i.options.scrollingX&&b>=g,i.__enableScrollY=i.options.scrollingY&&x>=g,s.push(i.__scrollLeft,i.__scrollTop,e),i.__isDragging=(i.__enableScrollX||i.__enableScrollY)&&(b>=v||x>=v)}i.__lastTouchLeft=o,i.__lastTouchTop=r,i.__lastTouchMove=e,i.__lastScale=n}},doTouchEnd:function(t){if(t instanceof Date&&(t=t.valueOf()),"number"!=typeof t)throw new Error("Invalid timestamp value: "+t);var e=this;if(e.__isTracking){if(e.__isTracking=!1,e.__isDragging&&(e.__isDragging=!1,e.__isSingleTouch&&e.options.animating&&t-e.__lastTouchMove<=100)){for(var n=e.__positions,i=n.length-1,o=i,r=i;r>0&&n[r]>e.__lastTouchMove-100;r-=3)o=r;if(o!==i){var s=n[i]-n[o],a=e.__scrollLeft-n[o-2],l=e.__scrollTop-n[o-1];e.__decelerationVelocityX=a/s*(1e3/60),e.__decelerationVelocityY=l/s*(1e3/60);var c=e.options.paging||e.options.snapping?4:1;(Math.abs(e.__decelerationVelocityX)>c||Math.abs(e.__decelerationVelocityY)>c)&&(e.__refreshActive||e.__startDeceleration(t))}}e.__isDecelerating||(e.__refreshActive&&e.__refreshStart?(e.__publish(e.__scrollLeft,-e.__refreshHeight,e.__zoomLevel,!0),e.__refreshStart&&e.__refreshStart()):(e.scrollTo(e.__scrollLeft,e.__scrollTop,!0,e.__zoomLevel),e.__refreshActive&&(e.__refreshActive=!1,e.__refreshDeactivate&&e.__refreshDeactivate()))),e.__positions.length=0}},__publish:function(n,o,r,s){var a=this,l=a.__isAnimating;if(l&&(i.effect.Animate.stop(l),a.__isAnimating=!1),s&&a.options.animating){a.__scheduledLeft=n,a.__scheduledTop=o,a.__scheduledZoom=r;var c=a.__scrollLeft,h=a.__scrollTop,u=a.__zoomLevel,f=n-c,_=o-h,d=r-u,p=function(t,e,n){n&&(a.__scrollLeft=c+f*t,a.__scrollTop=h+_*t,a.__zoomLevel=u+d*t,a.__callback&&a.__callback(a.__scrollLeft,a.__scrollTop,a.__zoomLevel))},m=function(t){return a.__isAnimating===t},g=function(t,e){e===a.__isAnimating&&(a.__isAnimating=!1),a.options.zooming&&a.__computeScrollMax()};a.__isAnimating=i.effect.Animate.start(p,m,g,250,l?t:e)}else a.__scheduledLeft=a.__scrollLeft=n,a.__scheduledTop=a.__scrollTop=o,a.__scheduledZoom=a.__zoomLevel=r,a.__callback&&a.__callback(n,o,r),a.options.zooming&&a.__computeScrollMax()},__computeScrollMax:function(t){var e=this;null==t&&(t=e.__zoomLevel),e.__maxScrollLeft=Math.max(e.__contentWidth*t-e.__clientWidth,0),e.__maxScrollTop=Math.max(e.__contentHeight*t-e.__clientHeight,0)},__startDeceleration:function(){var t=this;if(t.options.paging){var e=Math.max(Math.min(t.__scrollLeft,t.__maxScrollLeft),0),n=Math.max(Math.min(t.__scrollTop,t.__maxScrollTop),0),o=t.__clientWidth,r=t.__clientHeight;t.__minDecelerationScrollLeft=Math.floor(e/o)*o,t.__minDecelerationScrollTop=Math.floor(n/r)*r,t.__maxDecelerationScrollLeft=Math.ceil(e/o)*o,t.__maxDecelerationScrollTop=Math.ceil(n/r)*r}else t.__minDecelerationScrollLeft=0,t.__minDecelerationScrollTop=0,t.__maxDecelerationScrollLeft=t.__maxScrollLeft,t.__maxDecelerationScrollTop=t.__maxScrollTop;var s=function(e,n,i){t.__stepThroughDeceleration(i)},a=t.options.snapping?4:.1,l=function(){return Math.abs(t.__decelerationVelocityX)>=a||Math.abs(t.__decelerationVelocityY)>=a},c=function(){t.__isDecelerating=!1,t.scrollTo(t.__scrollLeft,t.__scrollTop,t.options.snapping)};t.__isDecelerating=i.effect.Animate.start(s,l,c)
},__stepThroughDeceleration:function(t){var e=this,n=e.__scrollLeft+e.__decelerationVelocityX,i=e.__scrollTop+e.__decelerationVelocityY;if(!e.options.bouncing){var o=Math.max(Math.min(e.__maxScrollLeft,n),0);o!==n&&(n=o,e.__decelerationVelocityX=0);var r=Math.max(Math.min(e.__maxScrollTop,i),0);r!==i&&(i=r,e.__decelerationVelocityY=0)}if(t?e.__publish(n,i,e.__zoomLevel):(e.__scrollLeft=n,e.__scrollTop=i),!e.options.paging){var s=.95;e.__decelerationVelocityX*=s,e.__decelerationVelocityY*=s}if(e.options.bouncing){var a=0,l=0,c=.03,h=.08;n<e.__minDecelerationScrollLeft?a=e.__minDecelerationScrollLeft-n:n>e.__maxDecelerationScrollLeft&&(a=e.__maxDecelerationScrollLeft-n),i<e.__minDecelerationScrollTop?l=e.__minDecelerationScrollTop-i:i>e.__maxDecelerationScrollTop&&(l=e.__maxDecelerationScrollTop-i),0!==a&&(a*e.__decelerationVelocityX<=0?e.__decelerationVelocityX+=a*c:e.__decelerationVelocityX=a*h),0!==l&&(l*e.__decelerationVelocityY<=0?e.__decelerationVelocityY+=l*c:e.__decelerationVelocityY=l*h)}}};for(var s in r)n.prototype[s]=r[s]}(),e.exports=n},{"./core.js":31,jbone:7}],31:[function(t,e){t("./globals.js");var n={effect:{}};e.exports=n;var i=Date.now||function(){return+new Date},o=60,r=1e3,s={},a=1;n.effect.Animate={stop:function(t){var e=null!=s[t];return e&&(s[t]=null),e},isRunning:function(t){return null!=s[t]},start:function(t,e,n,l,c,h){var u=i(),f=u,_=0,d=0,p=a++;if(h||(h=document.body),p%20===0){var m={};for(var g in s)m[g]=!0;s=m}var v=function(a){var m=a!==!0,g=i();if(!s[p]||e&&!e(p))return s[p]=null,void(n&&n(o-d/((g-u)/r),p,!1));if(m)for(var b=Math.round((g-f)/(r/o))-1,x=0;x<Math.min(b,4);x++)v(!0),d++;l&&(_=(g-u)/l,_>1&&(_=1));var y=c?c(_):_;t(y,g,m)!==!1&&1!==_||!m?m&&(f=g,requestAnimationFrame(v,h)):(s[p]=null,n&&n(o-d/((g-u)/r),p,1===_||null==l))};return s[p]=!0,requestAnimationFrame(v,h),p}}},{"./globals.js":32}],32:[function(){!function(t){if(!t.requestAnimationFrame){var e=Date.now||function(){return+new Date},n=Object.keys||function(t){var e={};for(var n in t)e[n]=!0;return e},i=Object.empty||function(t){for(var e in t)return!1;return!0},o="RequestAnimationFrame",r=function(){for(var e="webkit,moz,o,ms".split(","),n=0;4>n;n++)if(null!=t[e[n]+o])return e[n]}();if(r)return t.requestAnimationFrame=t[r+o],void(t.cancelRequestAnimationFrame=t[r+"Cancel"+o]);var s=60,a={},l=1,c=null;t.requestAnimationFrame=function(t){var i=l++;return a[i]=t,null===c&&(c=setTimeout(function(){var t=e(),i=a,o=n(i);a={},c=null;for(var r=0,s=o.length;s>r;r++)i[o[r]](t)},1e3/s)),i},t.cancelRequestAnimationFrame=function(t){delete a[t],i(a)&&(clearTimeout(c),c=null)}}}(this)},{}],"biojs-vis-seqlogo":[function(t,e){EasyScroller=t("./src/scroller/EasyScroller.js"),e.exports=t("./src/index.js")},{"./src/index.js":20,"./src/scroller/EasyScroller.js":29}],xhr:[function(t,e){function n(t,e){function n(){4===p.readyState&&T()}function o(){var t=null;if(p.response?t=p.response:"text"!==p.responseType&&p.responseType||(t=p.responseText||p.responseXML),w)try{t=JSON.parse(t)}catch(e){}return t}function h(){return 1223===p.status?204:p.status}function u(t){var e=null;if(0===t||t>=400&&600>t){var n=("string"==typeof b?b:!1)||a[String(t).charAt(0)];e=new Error(n),e.statusCode=t}return e}function f(){var t=h(),n=u(t),i={body:o(),statusCode:t,statusText:p.statusText,raw:p};i.headers=p.getAllResponseHeaders?s(p.getAllResponseHeaders()):{},e(n,i,i.body)}function _(){var t=h(),n=u(t);p.status=p.statusCode=t,p.body=o(),p.headers=s(p.getAllResponseHeaders()),e(n,p,p.body)}function d(t){e(t,p)}"string"==typeof t&&(t={uri:t}),t=t||{},e=r(e);var p=t.xhr||null;p||(p=t.cors||t.useXDR?new c:new l);var m,g=p.url=t.uri||t.url,v=p.method=t.method||"GET",b=t.body||t.data,x=p.headers=t.headers||{},y=!!t.sync,w=!1,T=t.response?f:_;if("json"in t&&(w=!0,x.Accept="application/json","GET"!==v&&"HEAD"!==v&&(x["Content-Type"]="application/json",b=JSON.stringify(t.json))),p.onreadystatechange=n,p.onload=T,p.onerror=d,p.onprogress=function(){},p.ontimeout=i,p.open(v,g,!y),(t.withCredentials||t.cors&&t.withCredentials!==!1)&&(p.withCredentials=!0),y||(p.timeout="timeout"in t?t.timeout:5e3),p.setRequestHeader)for(m in x)x.hasOwnProperty(m)&&p.setRequestHeader(m,x[m]);else if(t.headers)throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(p.responseType=t.responseType),"beforeSend"in t&&"function"==typeof t.beforeSend&&t.beforeSend(p),p.send(b),p}function i(){}var o=t("global/window"),r=t("once"),s=t("parse-headers"),a={0:"Internal XMLHttpRequest Error",4:"4xx Client Error",5:"5xx Server Error"},l=o.XMLHttpRequest||i,c="withCredentials"in new l?l:o.XDomainRequest;e.exports=n},{"global/window":9,once:10,"parse-headers":14}]},{},["biojs-vis-seqlogo"])("biojs-vis-seqlogo")});